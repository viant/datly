init:

pipeline:

  dynamodb:
    create:
      action: dsunit:init
      datastore: dyndb
      config:
        driverName: dyndb
        parameters:
          region: us-west-1
          key: dummy
          secret: dummy
          endpoint: localhost:8000
      scripts:
        - URL: ${appPath}/e2e/local/datastore/dyndb/schema.ddl

    prepare:
      action: 'dsunit:prepare'
      datastore: dyndb
      expand: true
      URL: ${appPath}/e2e/local/datastore/dyndb/populate


  mysql:
    create:
      action: dsunit:init
      datastore: dev
      recreate: false
      config:
        driverName: mysql
        descriptor: '[username]:[password]@tcp(${dbIP.mysql}:3306)/[dbname]?parseTime=true'
        credentials: $mysqlCredentials
      admin:
        datastore: mysql
        ping: true
        config:
          driverName: mysql
          descriptor: '[username]:[password]@tcp(${dbIP.mysql}:3306)/[dbname]?parseTime=true'
          credentials: $mysqlCredentials
      scripts:
        - URL: ${appPath}/e2e/local/datastore/mysql/schema.ddl

    prepare:
      action: 'dsunit:prepare'
      datastore: dev
      expand: true
      URL: ${appPath}/e2e/local/datastore/mysql/populate



#    createSqlite3:
#      action: dsunit:init
#      datastore: dev
#      recreate: false
#      config:
#        driverName: sqlite3
#        descriptor: 'url:${appPath}/e2e/local/datastore/sqlite3/test.db'
#      scripts:
#        - URL: ${appPath}/e2e/local/datastore/sqlite3/script/schema.ddl
#
#    prepareSqllite3:
#      action: 'dsunit:prepare'
#      datastore: dev
#      expand: true
#      URL: ${appPath}/e2e/local/datastore/sqlite3/populate

#
#  sqlite3:
#    create:
#      action: exec:run
#      commands:
#        - sqlite3 ${appPath}/e2e/local/datastore/sqlite3/test.db
#        - CREATE TABLE IF NOT EXISTS FOOS (
#          ID INTEGER PRIMARY KEY,
#          QUANTITY REAL,
#          NAME TEXT
#          );
#        - INSERT INTO FOOS (ID,QUANTITY,NAME) VALUES (1, 125.5, "Foo - name");
#        - .quit
